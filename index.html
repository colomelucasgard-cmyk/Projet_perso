<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Pour Toi</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Zen+Maru+Gothic:wght@400;700&display=swap" rel="stylesheet">

    <style>
        /* --- RESET & BASE --- */
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            /* FOND DE SECOURS : Un d√©grad√© Sakura si les images buggent */
            background: linear-gradient(to bottom, #ff9a9e 0%, #fecfef 99%, #fecfef 100%);
            font-family: 'Zen Maru Gothic', sans-serif;
        }

        /* --- ARRI√àRE-PLAN (SLIDESHOW) --- */
        #bg-container {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: 0;
        }
        .bg-slide {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background-size: cover;
            background-position: center;
            opacity: 0;
            transition: opacity 2s ease-in-out;
        }
        .bg-slide.active { opacity: 1; }

        /* Filtre blanc/rose pour adoucir les photos (effet romantique) */
        #overlay-filter {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(40, 10, 20, 0.4); /* L√©g√®rement teint√© sombre pour lisibilit√© */
            z-index: 1;
        }

        /* --- CANVAS (P√âTALES) --- */
        #canvas-sakura {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: 2;
            pointer-events: auto; /* Important pour capter le touch */
        }

        /* --- INSTRUCTION DE D√âPART --- */
        #start-instruction {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
            text-align: center;
            color: white;
            pointer-events: none; /* Laisse passer le clic vers le canvas */
            transition: opacity 1s;
        }
        .hand-icon { font-size: 3rem; margin-bottom: 10px; display: block; animation: float 2s infinite ease-in-out; }
        .tap-text { font-family: 'Great Vibes', cursive; font-size: 2rem; text-shadow: 0 2px 10px rgba(0,0,0,0.3); }

        @keyframes float { 0%, 100% {transform: translateY(0);} 50% {transform: translateY(-15px);} }

        /* --- CONTENU PRINCIPAL (Cach√© au d√©but) --- */
        #main-content {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: 5;
            display: flex; /* CENTRAGE PARFAIT */
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            opacity: 0; /* Invisible au d√©part */
            transition: opacity 2.5s ease-out; /* Apparition lente */
            pointer-events: none;
        }

        h1 {
            font-family: 'Great Vibes', cursive;
            font-size: 3.5rem;
            color: #fff0f5;
            margin: 0 0 10px 0;
            text-shadow: 0 4px 6px rgba(0,0,0,0.3);
            line-height: 1.2;
        }
        
        p.subtitle {
            font-size: 1.1rem;
            color: #ffd1dc;
            margin-bottom: 40px;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
            padding: 0 20px;
        }

        /* Glassmorphism am√©lior√© */
        .glass-panel {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            padding: 15px 25px;
            margin: 10px;
            width: 70%;
            max-width: 300px;
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
        }

        .timer-label { font-size: 0.9rem; text-transform: uppercase; letter-spacing: 1px; color: #ffb7c5; }
        .timer-val { font-size: 1.3rem; font-weight: bold; color: white; margin-top: 5px; }

    </style>
</head>
<body>

    <div id="bg-container">
        </div>
    
    <div id="overlay-filter"></div>

    <canvas id="canvas-sakura"></canvas>

    <div id="start-instruction">
        <span class="hand-icon">üëÜ</span>
        <span class="tap-text">Touche l'√©cran...</span>
    </div>

    <div id="main-content">
        <h1>Joyeuse<br>Saint-Valentin</h1>
        <p class="subtitle">Pour mon √¢me soeur que j'aime tant</p>

        <div class="glass-panel">
            <div class="timer-label">Premier Bisou</div>
            <div id="timer-kiss" class="timer-val">...</div>
        </div>

        <div class="glass-panel">
            <div class="timer-label">Officiellement Nous</div>
            <div id="timer-official" class="timer-val">...</div>
        </div>
    </div>

    <script>
        // ==========================================
        // CONFIGURATION (TES PHOTOS ICI)
        // ==========================================
        // Remplace par tes noms de fichiers exacts (attention minuscules/majuscules !)
        const images = [
            'nous1.jpg', 
            '1000014222.jpg',
            '1000014295.jpg' 
        ];

  
        //rencontre en 2025 !
        const dateKiss = new Date(2025, 5, 1, 0, 0, 0); // 1er Juin (Mois 5 car Janvier = 0)
        const dateOfficial = new Date(2025, 6, 17, 0, 0, 0); // 17 Juillet

        // ==========================================
        // 1. GESTION DU SLIDESHOW
        // ==========================================
        const bgContainer = document.getElementById('bg-container');
        
        if(images.length > 0) {
            images.forEach((img, i) => {
                const el = document.createElement('div');
                el.classList.add('bg-slide');
                el.style.backgroundImage = `url('${img}')`;
                if(i === 0) el.classList.add('active');
                bgContainer.appendChild(el);
            });
        }

        let curSlide = 0;
        function rotateSlide() {
            const slides = document.querySelectorAll('.bg-slide');
            if(slides.length > 1) {
                slides[curSlide].classList.remove('active');
                curSlide = (curSlide + 1) % slides.length;
                slides[curSlide].classList.add('active');
            }
        }
        setInterval(rotateSlide, 5000);

        // ==========================================
        // 2. TIMERS
        // ==========================================
        function getDuration(startDate) {
            const now = new Date();
            const diff = now - startDate;
            if (diff < 0) return "Bient√¥t..."; // S√©curit√© si date future

            const days = Math.floor(diff / (86400000));
            const hours = Math.floor((diff % 86400000) / 3600000);
            const mins = Math.floor((diff % 3600000) / 60000);
            return `${days}j ${hours}h ${mins}m`;
        }
        function refreshTimers() {
            document.getElementById('timer-kiss').innerText = getDuration(dateKiss);
            document.getElementById('timer-official').innerText = getDuration(dateOfficial);
        }
        setInterval(refreshTimers, 1000); // Mise √† jour chaque seconde pour effet dynamique
        refreshTimers();

        // ==========================================
        // 3. MOTEUR SAKURA (CANVAS)
        // ==========================================
        const canvas = document.getElementById('canvas-sakura');
        const ctx = canvas.getContext('2d');
        let width, height;
        let petals = [];
        let isStarted = false; // Pour savoir si elle a touch√© l'√©cran

        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resize);
        resize();

        class Petal {
            constructor() {
                this.x = Math.random() * width;
                this.y = Math.random() * height - height; // Commence au dessus
                this.size = Math.random() * 10 + 5;
                this.speedY = Math.random() * 1 + 0.5;
                this.speedX = Math.random() * 2 - 1;
                this.color = `rgba(255, ${Math.floor(Math.random() * 50 + 200)}, ${Math.floor(Math.random() * 50 + 200)}, ${Math.random() * 0.5 + 0.3})`;
                this.angle = Math.random() * 360;
                this.spin = Math.random() * 2 - 1;
            }

            update() {
                this.y += this.speedY;
                this.x += Math.sin(this.angle * 0.01) + this.speedX; // Oscillation
                this.angle += this.spin;

                // Si on a "activ√©" (touch√©), les p√©tales tombent un peu plus vite
                if (isStarted) {
                    this.speedY += 0.001; 
                }

                // Reset si sort de l'√©cran
                if (this.y > height) {
                    this.y = -20;
                    this.x = Math.random() * width;
                }
                if (this.x > width) this.x = 0;
                if (this.x < 0) this.x = width;
            }

            draw() {
                ctx.save();
                ctx.translate(this.x, this.y);
                ctx.rotate(this.angle * Math.PI / 180);
                ctx.fillStyle = this.color;
                
                // Dessin d'un p√©tale (forme ovale simple)
                ctx.beginPath();
                ctx.ellipse(0, 0, this.size, this.size / 2, 0, 0, Math.PI * 2);
                ctx.fill();
                ctx.restore();
            }
        }

        // Cr√©er 100 p√©tales
        function initPetals() {
            petals = [];
            for (let i = 0; i < 80; i++) {
                petals.push(new Petal());
            }
        }
        initPetals();

        function animate() {
            ctx.clearRect(0, 0, width, height); // On efface tout √† chaque frame (pas de train√©e cette fois, plus net)
            
            petals.forEach(p => {
                p.update();
                p.draw();
            });
            requestAnimationFrame(animate);
        }
        animate();

        // ==========================================
        // 4. INTERACTION (Le moment magique)
        // ==========================================
        function revealMagic() {
            if (isStarted) return; // D√©j√† fait
            isStarted = true;

            // 1. Cacher l'instruction
            document.getElementById('start-instruction').style.opacity = 0;
            
            // 2. Afficher le contenu doucement
            document.getElementById('main-content').style.opacity = 1;

            // 3. Petit effet "vent" : on ajoute des p√©tales et on les agite
            for(let i=0; i<30; i++) petals.push(new Petal());
            petals.forEach(p => { p.speedY += 2; }); // Acc√©l√©ration soudaine
        }

        // √âcoute clic ou touch
        window.addEventListener('touchstart', revealMagic);
        window.addEventListener('click', revealMagic);

    </script>
</body>
</html>
